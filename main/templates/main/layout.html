<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>{% block title %}dukkha{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            :root {
                --link-color: #1175e2;
            }
            body { font-family: sans-serif; line-height: 1.5; margin: 0; }
            h1 { font-weight: normal; margin: 16px 0 8px; }
            a { color: var(--link-color); text-decoration: none; }
            a:hover { text-decoration: underline; }
            nav, main { max-width: 500px; margin: 0 auto; margin: 16px auto; }
            aside { max-width: 500px; margin: 8px auto; border: 1px dashed black; padding: 0 8px; }
            img { width: 100%; }
            label { display: block; }
            input[type="text"],
            input[type="email"],
            input[type="password"] {
                display: block;
                width: 100%;
                box-sizing: border-box;
            }
            textarea { width: 100%; }
            .helptext { color: #757575; }
            .form-inline { display: inline-block; }
            .form-inline input[type="submit"] {
                border: none;
                background: unset;
                color: var(--link-color);
                padding: 0;
                font-size: 16px;
                cursor: pointer;
            }
            .form-inline input[type="submit"]:hover { text-decoration: underline; }
        </style>

        <style>
            {{ request.custom_css }}
        </style>
    </head>

    <body>
        {% if messages %}
        <aside>
            {% for message in messages %}
            <div {% if message.tags %}class="alert-{{ message.tags }}"{% endif %}>{{ message|safe }}</div>
            {% endfor %}
        </aside>
        {% endif %}

        {# Logged in user, on account #}
        {% if request.user.is_authenticated and request.subdomain == request.user.username %}
        <div style="background: white; text-align: center; box-shadow: 0 -5px 8px rgba(0, 0, 0, 0.5);">
            <a style="color: black; margin-right: 16px;" href="{% url 'index' %}">Website</a>
            <a style="color: black;" href="{{ canonical_url }}{% url 'dashboard' %}">Dashboard</a>
        </div>
        {% endif %}

        {# Logged in user, on dashboard #}
        {% if request.user.is_authenticated and not request.subdomain %}
        <div style="background: white; text-align: center; box-shadow: 0 -5px 8px rgba(0, 0, 0, 0.5);">
            <a style="color: black; margin-right: 16px;" href="{% url 'index' %}">Website</a>
            <a style="color: black;" href="{{ canonical_url }}{% url 'dashboard' %}">Dashboard</a>
        </div>
        {% endif %}

        {# Logged out, on landing #}
        {% if not request.user.is_authenticated and not request.subdomain %}
        <nav>
            <a href="{% url 'index' %}">Home</a>
            | <a href="{% url 'user_create' %}">Sign up</a>
            | <a href="{% url 'login' %}">Log in</a>
        </nav>
        {% endif %}

        {% block content %}
        {% endblock content %}

        {% block scripts %}
        {% endblock scripts %}
    </body>
</html>
